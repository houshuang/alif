# Analysis: 2026-02-09 — First Day Production Usage

## Data Source
All data pulled via SSH from production server (`ssh alif`), querying SQLite DB at `/app/data/alif.db` inside `alif-backend-1` container.

## JSONL Event Summary

```
Event type counts from interactions_2026-02-09.jsonl:
- sentence_review: 59
- sentence_selected: 390
- session_start: 39
- review_word_lookup: 408
- review: 217 (individual word-level FSRS reviews from sentence reviews)
```

## Word Provenance

```sql
SELECT source, COUNT(*) FROM user_lemma_knowledge GROUP BY source;
```
| source   | count |
|----------|-------|
| duolingo | 182   |
| study    | 34    |

Zero `source="encountered"` records — the auto-creation path in `fsrs_service.py:107-113` exists but hasn't produced orphan words.

## Stability Distribution

```sql
-- Parsed from fsrs_card_json stability field
SELECT
  CASE
    WHEN stability < 0.02 THEN '<0.5h'
    WHEN stability < 0.5 THEN '0.5h-12h'
    WHEN stability < 1.0 THEN '12h-1d'
    WHEN stability < 3.0 THEN '1-3d'
    WHEN stability < 7.0 THEN '3-7d'
    ELSE '7d+'
  END as bucket,
  COUNT(*) as count
FROM (parsed stability from fsrs_card_json)
GROUP BY bucket;
```

| Bucket    | Count |
|-----------|-------|
| <0.5d     | 118   |
| 0.5d-1d   | 3     |
| 1-3d      | 95    |
| 3d+       | 0     |

**Interpretation**: 55% of words have sub-day stability. This is expected for day 1 — FSRS needs multiple successful reviews to build stability. The 95 words in the 1-3d bucket likely had multiple successful "understood" ratings.

## Always-Failing Words

```sql
SELECT COUNT(*) FROM user_lemma_knowledge
WHERE times_seen > 0 AND times_correct = 0;
-- Result: 57
```

57 out of ~183 seen words (31%) have never been marked as correct. These words appear in sentences but are always part of the "partial" comprehension signal where they get marked as missed/confused.

## Due Words

```sql
-- Count of words currently due (due datetime <= now)
SELECT COUNT(*) FROM user_lemma_knowledge
WHERE fsrs_card_json IS NOT NULL
  AND json_extract(fsrs_card_json, '$.due') <= datetime('now');
-- Result: 131 of 216 (61%)
```

30 words have never been reviewed at all but are due (auto-introduced yesterday via the now-removed collocate system's `word_auto_introduced` events).

## Comprehension Signals

```sql
SELECT comprehension_signal, COUNT(*)
FROM sentence_review_log
WHERE date(reviewed_at) = date('now')
GROUP BY comprehension_signal;
```

| Signal      | Count | Pct  |
|-------------|-------|------|
| partial     | 46    | 78%  |
| understood  | 13    | 22%  |
| no_idea     | 0     | 0%   |

## Credit Type Distribution

```sql
SELECT credit_type, rating, COUNT(*)
FROM review_log
WHERE date(reviewed_at) = date('now')
GROUP BY credit_type, rating;
```

| Credit Type | Rating | Count |
|-------------|--------|-------|
| primary     | 1      | 18    |
| primary     | 2      | 4     |
| primary     | 3      | 37    |
| collateral  | 1      | 19    |
| collateral  | 2      | 2     |
| collateral  | 3      | 137   |

73% of reviews are collateral (words in the sentence that aren't the primary target). This is by design — every word in a reviewed sentence gets an FSRS review.

## Offline Sync Verification

- All 59 sentence_review events in JSONL have `source: "sync"`
- All 59 match DB SentenceReviewLog entries
- Zero duplicate client_review_ids detected
- Sync queue working correctly

## Session Assembly

- 39 session_start events for 59 sentence reviews
- High ratio likely from frontend code reloads during development (each app reload fetches a new session)
- Each session covered 3-10 sentences on average

## Notable Sentences

Some generated sentences had quality issues:
- Sentence 515 reviewed twice (same sentence, 2 reviews)
- Sentences 337 and 339 have identical Arabic text (duplicate generation)
- Some sentences felt contextually odd ("Did onions flow copiously in your wife's kitchen?")

## Summary

Day 1 baseline established. Key metrics to track going forward:
1. Stability distribution shift (should move rightward)
2. Always-failing word count (should decrease after re-introduction cards)
3. Comprehension signal trend (is 78% partial stable, improving, or worsening?)
4. Words transitioning to "known" state per day
